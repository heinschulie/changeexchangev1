"use strict";var app=angular.module("cxcApp",["ngRoute","ngSanitize","angular-carousel"]);app.config(["$routeProvider","$locationProvider",function(e,l){e.when("/exchange/:pagename",{controller:"pageController",templateUrl:"/app/views/page.html"}),e.when("/galleries",{controller:"galleriesController",templateUrl:"/app/views/galleries.html"}),e.when("/gallery/:galleryName",{controller:"galleryController",templateUrl:"/app/views/gallery.html"}),e.when("/home",{controller:"homeController",templateUrl:"/app/views/home.html"}),e.when("/:postId/:postTitle",{controller:"postController",templateUrl:"/app/views/post.html"}),e.when("/oops",{templateUrl:"/app/views/oops.html"}),e.otherwise({redirectTo:"/home"}),l.html5Mode(!0)}]),app.config(["$httpProvider",function(e){e.interceptors.push("ajaxInterceptorService"),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]);
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n){t.contentState=e,t.contentState.data.galleryViewing=!1,t.socialState=n;var a=function(){return e.getGalleries()};a()};t.controller("galleriesController",["$scope","contentState","socialState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),n=function(t,n){t.contentState=n,t.contentState.data.galleryViewing=!0;var a=function(){return n.getArtworks()};t.expand=function(n){angular.forEach(t.contentState.data.artworks,function(t){t!=n&&(t.active=!1)}),n.active=!n.active},a()};t.controller("galleryController",["$scope","contentState",n])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,a,n,o){t.contentState=n,t.contentState.data.galleryViewing=!1,t.socialState=o,t.errorState=a,t.callForPosts=function(){return n.getPosts()},n.data.categories.length<1&&(t.contentState.data.categories=t.contentState.standardPostCategories),n.data.posts.length<1&&t.callForPosts(),(!n.data.banners||n.data.banners.length<3)&&n.getBanners(null,!0)};t.controller("homeController",["$scope","$timeout","errorState","contentState","socialState",e])}();
!function(){"use strict";var e=angular.module("cxcApp"),t=function(e,t,a,n,o,c,r){e.contentState=o,e.socialState=c,e.exchangeCategories=[],e.flashbackCategories=[],e.errorState=n,e.active=!1,e.toggleMenu=function(){e.active?e.active=!1:e.active=!0},e.scroll=0,e.$watch(t.scrollY,function(t,a){t>0?e.minimalHeader=!0:e.minimalHeader=!1}),e.callForPosts=function(){return"/home"===a.path()?o.getPosts():void a.path("/home")};var i=function(t){return r.getCategories(t).then(function(a){"Exchange"===t&&(e.exchangeCategories=a.data),"Flashback"===t&&(e.flashbackCategories=a.data)})};i("Exchange"),i("Flashback"),o.data.banners&&o.data.banners.length||o.getBanners(null,!0)};e.controller("indexController",["$scope","$window","$location","errorState","contentState","socialState","categoryService",t])}();
!function(){"use strict";var e=angular.module("cxcApp"),t=function(e,t,a,n){e.contentState=a,e.contentState.data.galleryViewing=!1,n.data.videoPlayer=!1,a.changeMoments[0].active=!0,a.chosenMoment=a.changeMoments[0];var o=function(){return a.getPage(t.pagename)};o()};e.controller("pageController",["$scope","$routeParams","contentState","socialState",t])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,a,o,s,n){t.changeAgentPost=!1,t.sameAuthorPosts=[],t.sameCategoryPosts=[],t.recommendedMessageCat="",t.recommendedMessageAuthor="",t.contentState=n,t.contentState.data.galleryViewing=!1,t.socialState=s;var r=a.postId;t.callForPost=function(){return n.getPost(r).then(function(a){t.recommendedMessageCat="Enjoyed that article? Then we suggest you try one of these below...",t.recommendedMessageAuthor="More articles from "+n.data.post.author.name,t.facebooklikebutton=o.trustAsHtml('<div class="fb-like" ng-if="facebooklikeurl" data-ng-href="'+e.absUrl()+'" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>')})};var c=function(){n.getPostsByAuthor().then(function(e){t.sameAuthorPosts=e})},u=function(){t.sameAuthorPosts=n.data.posts.filter(function(t){return t.author.username===n.data.post.author.username&&t.ID!==n.data.post.ID}),t.sameAuthorPosts.length<3&&c(),t.sameCategoryPosts=n.data.posts.filter(function(t){if(t.ID===n.data.post.ID)return!1;for(var e=t.terms.category.map(function(t){return t.name}),a=0;a<e.length;a++)for(var o=0;o<n.data.categories.length;o++)if(e[a]===n.data.categories[o]&&"Change Moments"!==e[a]&&"Exchange"!==e[a])return!0})};r===n.data.post.ID?("Change agents"===n.data.categories[0]&&(t.changeAgentPost=!0),n.data.posts.length<1&&n.getPosts(),u()):t.callForPost().then(function(e){"Change agents"===n.data.categories[0]&&(t.changeAgentPost=!0),n.data.posts.length<1?n.getPosts().then(u):u()})};t.controller("postController",["$scope","$location","$routeParams","$sce","socialState","contentState",e])}();
!function(){var e=angular.module("cxcApp");e.directive("cxcBanner",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-banner.html",scope:{cxcbannercontent:"="},replace:!0,link:function(e){},controller:["$scope","$sce","$sanitize","contentState",function(e,n,c,t){e.contentState=t,("string"==typeof e.cxcbannercontent.excerpt||e.cxcbannercontent.excerpt instanceof String)&&(e.videoExists=!0,e.cxcbannercontent.excerpt=e.cxcbannercontent.excerpt.replace("<p>","").replace("</p>",""),e.cxcbannercontent.excerpt=n.trustAsResourceUrl(e.cxcbannercontent.excerpt))}]}}])}();
!function(){var t=angular.module("cxcApp");t.directive("cxcCard",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-card.html",scope:{cxccontent:"="},replace:!0,link:function(t){},controller:["$scope","$sce",function(t,c){("string"==typeof t.cxccontent.title||t.cxccontent.title instanceof String)&&(t.cxccontent.title=c.trustAsHtml(t.cxccontent.title)),("string"==typeof t.cxccontent.excerpt||t.cxccontent.excerpt instanceof String)&&(t.cxccontent.excerpt=c.trustAsHtml(t.cxccontent.excerpt))}]}}])}();
!function(){var n=angular.module("cxcApp");n.directive("scrollPosition",["$window",function(n){return{scope:{scroll:"=scrollPosition"},link:function(l,o,r){function i(n,l,o){var r;return function(){var i=this,c=arguments,t=function(){r=null,o||n.apply(i,c)},u=o&&!r;clearTimeout(r),r=setTimeout(t,l),u&&n.apply(i,c)}}var c=angular.element(n),t=(c[0].scrollY,function(){c[0].scrollY<500&&(l.scroll=c[0].scrollY)});i(t,200);n.innerWidth>1224&&(c.on("scroll",l.$apply.bind(l,t)),t())}}}])}();
!function(){var t=angular.module("cxcApp");t.directive("twitterStream",[function(){return{restrict:"E",templateUrl:"app/directives/templates/twitter-stream.html",replace:!0,link:function(t,e){function r(){!function(t,e,r){var n,i=t.getElementsByTagName(e)[0],c=/^http:/.test(t.location)?"http":"https";t.getElementById(r)||(n=t.createElement(e),n.id=r,n.src=c+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(n,i))}(document,"script","twitter-wjs")}r()},controller:["$scope","$timeout",function(t,e){}]}}])}();
"use strict";app.factory("ajaxInterceptorService",["$q","$window","$location","errorState","cxcService",function(e,a,t,s,r){var o=(r.serviceBase,{}),n=function(e){return e.headers=e.headers||{},e},u=function(e){0===e.status?(s.data.firstMessage="Something went slightly wrong - but we don't have much idea what happened...",s.data.ajaxErrors.push(e)):401===e.status?(s.data.firstMessage="This page could not be found!",s.data.ajaxErrors.push(e)):500===e.status&&(s.data.firstMessage="There seems to have been an issue on our side... :(",s.data.ajaxErrors.push(e)),e.status&&(a.location.href="http://localhost:16327/oops.html")};return o.request=n,o.responseError=u,o}]);
!function(){"use strict";var t=function(t,r,e){var n=r.serviceBase,a=function(r){return t.get(n+"posts/types/posts/taxonomies/category/terms").then(function(t){if(r){var e=t.data.filter(function(t){return t.parent?t.parent.name===r:void 0});t.data=e}return t})["catch"](function(t){e.catchError(t)})};return{getCategories:a}},r=angular.module("cxcApp");r.factory("categoryService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,a,n,o,r,s){var c={categories:[],chosenMoment:{},pageNumber:0,postsPerPage:20,post:{},posts:[],banners:[],galleries:[],artworks:[],galleryViewing:!1,mobileBannerVideoPlay:!1,bannerIndex:0},g=["Landing that Job","Making a Home","Starting a Family","Tying the Knot","Latest Hangouts","WP Jou Lekker Ding","Ruda talks change","The Dan Nicoll Show","VeranderDinge"],u={name:"What change moment are you going through?",active:!0},i=[{name:"What change moment are you going through?",active:!1},{name:"Landing that Job",active:!1},{name:"Making a Home",active:!1},{name:"Starting a Family",active:!1},{name:"Tying the Knot",active:!1}],m=function(t){return n.getPage(t).then(function(t){c.page=t.data,c.page.content=e.trustAsHtml(c.page.content)})},h=function(t){return o.getPost(t).then(function(t){c.categories=t.data.terms.category.map(function(t){return t.name}),c.post=t.data,c.post.title=e.trustAsHtml(c.post.title),c.post.excerpt=e.trustAsHtml(c.post.excerpt),c.post.content=e.trustAsHtml(c.post.content)})},p=function(t){return o.getPostByName(t).then(function(t){t.data.length&&(c.categories=t.data[0].terms.category.map(function(t){return t.name}),c.post=t.data[0],c.post.title=e.trustAsHtml(c.post.title),c.post.excerpt=e.trustAsHtml(c.post.excerpt),c.post.content=e.trustAsHtml(c.post.content),a.path("/"+c.post.ID))})},l=function(){return c.pageNumber=c.pageNumber+1,c.categories.length&&angular.forEach(c.categories,function(t){r.data.videoPlayer=!1,"events"===t.toLowerCase()&&r.changeSm(3,"fe")}),o.getPosts(c.postsPerPage,c.pageNumber,c.categories,!1).then(function(t){y(t.data,!1),1===c.pageNumber?c.posts=t.data:c.posts=c.posts.concat(t.data)})},f=function(){return o.getPostsByAuthor(c.post.author.ID).then(function(t){return y(t.data,!1),t.data})},d=function(t){return o.getPostsByTags(t).then(function(t){y(t.data,!1),c.pageNumber=1,c.posts=t.data})},P=function(){return o.getPosts(20,1,["art"],!0).then(function(t){c.artworks=t.data,angular.forEach(c.artworks,function(t){t.content=e.trustAsHtml(t.content),t.active=!1})})},b=function(){return o.getPosts(20,1,["gallery"],!1).then(function(t){y(t.data,!0),c.galleries=t.data})},v=function(t,e){var a=["banner"];return o.getBanners(c.postsPerPage,a).then(function(a){var n=[];t?(c.banners=[],angular.forEach(a.data,function(e){angular.forEach(e.terms.category,function(a){angular.forEach(t,function(t){a.name.toLowerCase()===t.toLowerCase()&&(n=n.concat(e))})})})):n=n.concat(a.data),e?(c.banners=[],angular.forEach(n,function(t){angular.forEach(t.terms.post_tag,function(e){"featured"===e.name.toLowerCase()&&(c.banners=c.banners.concat(t))})})):c.banners=c.banners.concat(n)})},y=function(t,e){var a=[];angular.forEach(t,function(t,n){t.urlName=encodeURI(t.title).replace(/%20/g,"-"),angular.forEach(t.terms.category,function(o){"banner"===o.name.toLowerCase()&&(a.push(n),e&&(c.banners=[],c.banners.push(t)))}),angular.forEach(t.terms.post_tag,function(e){"featured"===e.name.toLowerCase()&&(t.featured=!0)})});for(var n=a.length-1;n>-1;n--){var o=a[n];t.splice(o,1)}},w=function(t,e,n){c.categories=[],t&&("What change moment are you going through?"===t.name?(i[0].active=!0,u=i[0],c.categories=c.categories.concat(g)):(n?(i[0].active=!0,u=i[0],u.name="What change moment are you going through?"):u.name=t.name,c.categories.push(t.name))),angular.forEach(i,function(e){e.name===t.name?e.active=!0:e.active=!1}),n&&(u=i[0]),c.pageNumber=0;var o=c.postsPerPage*c.pageNumber;return c.posts=c.posts.splice(0,o),e&&(v(c.categories),c.bannerIndex=0),"/home"===a.path()?l():void a.path("/home")};return{data:c,standardPostCategories:g,chosenMoment:u,changeMoments:i,selectedMoment:w,getPage:m,getPost:h,getPostByName:p,getPosts:l,getPostsByAuthor:f,getPostsByTags:d,getArtworks:P,getGalleries:b,getBanners:v}},e=angular.module("cxcApp");e.factory("contentState",["$timeout","$sce","$location","pageService","postService","socialState","errorState",t])}();
!function(){"use strict";var e=function(e,r){var c="https://services.brightrock.co.za/changeexchange/wp-json/",a="http://changeexchangev1.azurewebsites.net/",t=function(){var a=e.defer();if(c)a.resolve(c);else{var t="Service Base is undefined.";a.reject(t);var n={message:t};r(n)}return a.promise};return{serviceBase:c,getServiceUrl:t,applicationBase:a}},r=angular.module("cxcApp");r.factory("cxcService",["$q","errorState",e])}();
!function(){var e=function(){var e={firstMessage:"There seems to have been one or more errors:",ajaxErrors:[],secondMessage:"Please refresh the browser window or come back again in a little while..."},r=function(e){console.log(e)};return{data:e,catchError:r}},r=angular.module("cxcApp");r.factory("errorState",[e])}();
!function(){"use strict";var t=function(t,e,r){var c=e.serviceBase,n=function(e){return t.get(c+"pages/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(){return t.get(c+"pages/").then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPage:n,getPages:a}},e=angular.module("cxcApp");e.factory("pageService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,r){var n=e.serviceBase,c=function(e,c){return c?t.get(n+"posts?filter[name]="+c).then(function(t){return t})["catch"](function(t){r.catchError(t)}):t.get(n+"posts/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},o=function(e){return e=e.replace("é","e"),t.get(n+"posts?filter[name]="+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},s=function(e,c,o,s){var i=n+"posts?filter[post_status]=publish&filter[posts_per_page]="+e+"&page="+c+"&fields=ID,title,excerpt";if(s&&(i+=",content"),o&&o.length>0){i+="&filter[category_name]=";for(var a=0;a<o.length;a++)i=i+","+o[a]}return i=i.replace("'",""),t.get(i).then(function(t){return t})["catch"](function(t){r.catchError(t)})},i=function(e){var r=n+"posts?filter[post_status]=publish&filter[posts_per_page]=3&filter[author]="+e+"&fields=ID,title,excerpt";return t.get(r).then(function(t){return t})},a=function(e){var c=n+"posts?filter[post_status]=publish&fields=ID,title,excerpt";if(e&&e.length>0){c+="&filter[tag]=";for(var o=0;o<e.length;o++)c=c+","+e[o]}return c=c.replace("'",""),t.get(c).then(function(t){return t})["catch"](function(t){r.catchError(t)})},u=function(e,c){var o=n+"posts?filter[post_status]=publish&filter[posts_per_page]="+e+"&fields=ID,title,excerpt";if(c&&c.length>0){o+="&filter[category_name]=";for(var s=0;s<c.length;s++)o=o+","+c[s]}return o=o.replace("'",""),t.get(o).then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPost:c,getPostByName:o,getPosts:s,getPostsByTags:a,getPostsByAuthor:i,getBanners:u}},e=angular.module("cxcApp");e.factory("postService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var e=function(e){var a={currentSm:"fb",fbevents:!1,socialNetworks:[{id:1,abbrev:"fb",url:"https://www.facebook.com/brightrock","class":"fa fa-facebook-square",active:!1},{id:2,abbrev:"tw",url:"https://www.twitter.com/","class":"fa fa-twitter-square",active:!1},{id:3,abbrev:"fe",url:"https://www.facebook.com/brightrock/events","class":"fa fa-facebook-square",active:!1},{id:4,abbrev:"gg",url:"https://www.google.com/","class":"fa fa-google-plus-square",active:!1},{id:5,abbrev:"yt",url:"https://www.youtube.com/","class":"fa fa-youtube-square",active:!1}],videoPlayer:!1,firstheader:!1,secondheader:!1,thirdheader:!1},t=function(t,r){angular.forEach(a.socialNetworks,function(a){a.id===t?e.innerWidth<1224?e.open(a.url):a.active=!0:a.active=!1}),"fe"===r?(a.currentSm="fb",a.fbevents=!0):(a.fbevents=!1,a.currentSm=r),"yt"===r?a.videoPlayer=!a.videoPlayer:a.videoPlayer=!1};return{data:a,changeSm:t}},a=angular.module("cxcApp");a.factory("socialState",["$window",e])}();