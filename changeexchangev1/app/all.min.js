"use strict";var app=angular.module("cxcApp",["ngRoute","ngSanitize","angular-carousel"]);app.config(["$routeProvider","$locationProvider",function(e,l){e.when("/exchange/:pagename",{controller:"pageController",templateUrl:"/app/views/page.html"}),e.when("/galleries",{controller:"galleriesController",templateUrl:"/app/views/galleries.html"}),e.when("/gallery/:galleryName",{controller:"galleryController",templateUrl:"/app/views/gallery.html"}),e.when("/home",{controller:"homeController",templateUrl:"/app/views/home.html"}),e.when("/:category/:subcategory/:slug",{controller:"postController",templateUrl:"/app/views/post.html"}),e.when("/oops",{templateUrl:"/app/views/oops.html"}),e.otherwise({redirectTo:"/home"}),l.html5Mode(!0)}]),app.config(["$httpProvider",function(e){e.interceptors.push("ajaxInterceptorService"),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]);
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n){e.data.bannerIndex=0,t.contentState=e,t.contentState.data.galleryViewing=!1,t.socialState=n;var a=function(){return e.getGalleries()};a()};t.controller("galleriesController",["$scope","contentState","socialState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),n=function(t,n){t.contentState=n,t.contentState.data.galleryViewing=!0;var a=function(){return n.getArtworks()};t.expand=function(n){angular.forEach(t.contentState.data.artworks,function(t){t!=n&&(t.active=!1)}),n.active=!n.active},a()};t.controller("galleryController",["$scope","contentState",n])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,a,n,o){t.contentState=n,t.contentState.data.menuActiveactive=!1,t.contentState.data.deactivateMore=!1,t.contentState.data.galleryViewing=!1,t.socialState=o,t.errorState=a,t.callForPosts=function(){return n.getPosts()},n.data.categories.length<1&&(t.contentState.data.categories=t.contentState.standardPostCategories),n.data.posts.length<1&&t.callForPosts(),(!n.data.banners||n.data.banners.length<3)&&n.getBanners(null,!0)};t.controller("homeController",["$scope","$timeout","errorState","contentState","socialState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,a,n,c,o,r){t.contentState=c,t.socialState=o,t.exchangeCategories=[],t.flashbackCategories=[],t.errorState=n,t.toggleMenu=function(){t.contentState.data.menuActiveactive?t.contentState.data.menuActiveactive=!1:t.contentState.data.menuActiveactive=!0},t.scroll=0,t.$watch(e.scrollY,function(e,a){e>0?t.minimalHeader=!0:t.minimalHeader=!1}),t.callForPosts=function(){return"/home"===a.path()?c.getPosts():void a.path("/home")};var i=function(e){return r.getCategories(e).then(function(a){"Exchange"===e&&(t.exchangeCategories=a.data),"Flashback"===e&&(t.flashbackCategories=a.data)})};i("Exchange"),i("Flashback"),c.data.banners&&c.data.banners.length||c.getBanners(null,!0)};t.controller("indexController",["$scope","$window","$location","errorState","contentState","socialState","categoryService",e])}();
!function(){"use strict";var e=angular.module("cxcApp"),t=function(e,t,a,n){e.contentState=a,e.contentState.data.galleryViewing=!1,n.data.videoPlayer=!1,a.changeMoments[0].active=!0,a.chosenMoment=a.changeMoments[0];var o=function(){return a.getPage(t.pagename)};o()};e.controller("pageController",["$scope","$routeParams","contentState","socialState",t])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,a,o,s,n,r){t.changeAgentPost=!1,t.sameAuthorPosts=[],t.facebooklikebutton=o.trustAsHtml('<div class="fb-like" ng-if="facebooklikeurl" data-ng-href="'+e.absUrl()+'" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>'),t.sameCategoryPosts=[],t.recommendedMessageCat="",t.recommendedMessageAuthor="",t.contentState=r,t.contentState.data.galleryViewing=!1,t.socialState=n;var c=a.slug;t.callForPost=function(){return r.getPostByTitle(c).then(function(e){t.recommendedMessageCat="Enjoyed that article? Then we suggest you try one of these below...",t.recommendedMessageAuthor="More articles from "+r.data.post.author.name})};var u=function(){r.getPostsByAuthor().then(function(e){t.sameAuthorPosts=e})},g=function(){t.sameAuthorPosts=r.data.posts.filter(function(t){return t.author.username===r.data.post.author.username&&t.ID!==r.data.post.ID}),t.sameAuthorPosts.length<3&&u(),t.sameCategoryPosts=r.data.posts.filter(function(t){if(t.ID===r.data.post.ID)return!1;for(var e=t.terms.category.map(function(t){return t.name}),a=0;a<e.length;a++)for(var o=0;o<r.data.categories.length;o++)if(e[a]===r.data.categories[o]&&"Change Moments"!==e[a]&&"Exchange"!==e[a])return!0})};c===r.data.post.ID?("Change agents"===r.data.categories[0]&&(t.changeAgentPost=!0),r.data.posts.length<1&&r.getPosts(),g()):t.callForPost().then(function(e){"Change agents"===r.data.categories[0]&&(t.changeAgentPost=!0),r.data.posts.length<1?r.getPosts().then(g):g()})};t.controller("postController",["$scope","$location","$routeParams","$sce","$timeout","socialState","contentState",e])}();
!function(){var n=angular.module("cxcApp");n.directive("cxcBanner",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-banner.html",scope:{cxcbannercontent:"="},replace:!0,link:function(n){},controller:["$scope","$sce","$sanitize","contentState",function(n,t,c,e){if(n.contentState=e,n.cxcbannercontent.url="",n.cxcbannercontent.content){var r=n.cxcbannercontent.content.match(/\[(.*)\]/);r&&r.length&&(n.cxcbannercontent.url=r.pop(),n.cxcbannercontent.content=n.cxcbannercontent.content.replace(/\[(.*)\]/,""))}("string"==typeof n.cxcbannercontent.excerpt||n.cxcbannercontent.excerpt instanceof String)&&(n.videoExists=!0,n.cxcbannercontent.excerpt=n.cxcbannercontent.excerpt.replace("<p>","").replace("</p>",""),n.cxcbannercontent.excerpt=t.trustAsResourceUrl(n.cxcbannercontent.excerpt)),("string"==typeof n.cxcbannercontent.title||n.cxcbannercontent.title instanceof String)&&(n.cxcbannercontent.title=t.trustAsHtml(n.cxcbannercontent.title)),("string"==typeof n.cxcbannercontent.content||n.cxcbannercontent.content instanceof String)&&(n.cxcbannercontent.content=t.trustAsHtml(n.cxcbannercontent.content)),("string"==typeof n.cxcbannercontent.slug||n.cxcbannercontent.slug instanceof String)&&(n.cxcbannercontent.slug=t.trustAsHtml(n.cxcbannercontent.slug))}]}}])}();
!function(){var c=angular.module("cxcApp");c.directive("cxcCard",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-card.html",scope:{cxccontent:"="},replace:!0,link:function(c){},controller:["$scope","$sce","cxcService",function(c,t,n){("string"==typeof c.cxccontent.title||c.cxccontent.title instanceof String)&&(c.cxccontent.title=t.trustAsHtml(c.cxccontent.title)),("string"==typeof c.cxccontent.excerpt||c.cxccontent.excerpt instanceof String)&&(c.cxccontent.excerpt=t.trustAsHtml(c.cxccontent.excerpt)),("string"==typeof c.cxccontent.slug||c.cxccontent.slug instanceof String)&&(c.cxccontent.slug=t.trustAsHtml(c.cxccontent.slug)),c.cxccontent.url="",c.cxccontent.terms.category[0]&&(c.cxccontent.terms.category[0].parent&&(c.cxccontent.url=c.cxccontent.url+c.cxccontent.terms.category[0].parent.name+"/"),c.cxccontent.url=c.cxccontent.url+c.cxccontent.terms.category[0].name,c.cxccontent.url=c.cxccontent.url+"/"+c.cxccontent.slug,c.cxccontent.url=encodeURI(c.cxccontent.url).replace(/%20/g,"-"))}]}}])}();
!function(){var n=angular.module("cxcApp");n.directive("scrollPosition",["$window",function(n){return{scope:{scroll:"=scrollPosition"},link:function(l,o,r){function i(n,l,o){var r;return function(){var i=this,c=arguments,t=function(){r=null,o||n.apply(i,c)},u=o&&!r;clearTimeout(r),r=setTimeout(t,l),u&&n.apply(i,c)}}var c=angular.element(n),t=(c[0].scrollY,function(){c[0].scrollY<500&&(l.scroll=c[0].scrollY)});i(t,200);n.innerWidth>1224&&(c.on("scroll",l.$apply.bind(l,t)),t())}}}])}();
!function(){var t=angular.module("cxcApp");t.directive("twitterStream",[function(){return{restrict:"E",templateUrl:"app/directives/templates/twitter-stream.html",replace:!0,link:function(t,e){function r(){!function(t,e,r){var n,i=t.getElementsByTagName(e)[0],c=/^http:/.test(t.location)?"http":"https";t.getElementById(r)||(n=t.createElement(e),n.id=r,n.src=c+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(n,i))}(document,"script","twitter-wjs")}r()},controller:["$scope","$timeout",function(t,e){}]}}])}();
"use strict";app.factory("ajaxInterceptorService",["$q","$window","$location","errorState","cxcService",function(e,a,t,s,r){var o=(r.serviceBase,{}),n=function(e){return e.headers=e.headers||{},e},u=function(e){0===e.status?(s.data.firstMessage="Something went slightly wrong - but we don't have much idea what happened...",s.data.ajaxErrors.push(e)):401===e.status?(s.data.firstMessage="This page could not be found!",s.data.ajaxErrors.push(e)):500===e.status&&(s.data.firstMessage="There seems to have been an issue on our side... :(",s.data.ajaxErrors.push(e)),e.status&&(a.location.href="http://localhost:16327/oops.html")};return o.request=n,o.responseError=u,o}]);
!function(){"use strict";var t=function(t,r,e){var n=r.serviceBase,a=function(r){return t.get(n+"posts/types/posts/taxonomies/category/terms").then(function(t){if(r){var e=t.data.filter(function(t){return t.parent?t.parent.name===r:void 0});t.data=e}return t})["catch"](function(t){e.catchError(t)})};return{getCategories:a}},r=angular.module("cxcApp");r.factory("categoryService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,a,n,o,r,s){var c={categories:[],chosenMoment:{},pageNumber:0,postsPerPage:20,post:{},posts:[],banners:[],galleries:[],artworks:[],galleryViewing:!1,mobileBannerVideoPlay:!1,bannerIndex:0,deactivateMore:!1,menuActive:!1},g=["Landing that Job","Making a Home","Starting a Family","Tying the Knot","Latest Hangouts","WP Jou Lekker Ding","Ruda talks change","The Dan Nicoll Show","VeranderDinge"],u={name:"What change moment are you going through?",active:!0},i=[{name:"What change moment are you going through?",active:!1},{name:"All Change Moments",active:!1},{name:"Landing that Job",active:!1},{name:"Making a Home",active:!1},{name:"Starting a Family",active:!1},{name:"Tying the Knot",active:!1}],m=function(t){return n.getPage(t).then(function(t){c.page=t.data,c.page.content=e.trustAsHtml(c.page.content)})},p=function(t){return o.getPost(t).then(function(t){return c.categories=t.data.terms.category.map(function(t){return t.name}),c.post=t.data,c.post.title=e.trustAsHtml(c.post.title),c.post.excerpt=e.trustAsHtml(c.post.excerpt),c.post.content=e.trustAsHtml(c.post.content),t})},l=function(t){return o.getPostByName(t).then(function(t){t.data.length&&(c.categories=t.data[0].terms.category.map(function(t){return t.name}),c.post=t.data[0],c.post.title=e.trustAsHtml(c.post.title),c.post.excerpt=e.trustAsHtml(c.post.excerpt),c.post.content=e.trustAsHtml(c.post.content),c.post.slug=e.trustAsHtml(c.post.slug))})},h=function(t){return o.getPostByName(t).then(function(t){t.data.length&&(c.categories=t.data[0].terms.category.map(function(t){return t.name}),c.post=t.data[0],c.post.title=e.trustAsHtml(c.post.title),c.post.excerpt=e.trustAsHtml(c.post.excerpt),c.post.content=e.trustAsHtml(c.post.content),a.path("/"+c.post.ID))})},f=function(){return c.pageNumber=c.pageNumber+1,c.categories.length&&angular.forEach(c.categories,function(t){r.data.videoPlayer=!1}),o.getPosts(c.postsPerPage,c.pageNumber,c.categories,!1).then(function(t){t.data.length<1?c.deactivateMore=!0:A(t.data,!1),1===c.pageNumber?c.posts=t.data:c.posts=c.posts.concat(t.data)})},d=function(){return o.getPostsByAuthor(c.post.author.ID).then(function(t){return A(t.data,!1),t.data})},v=function(t){return o.getPostsByTags(t).then(function(t){A(t.data,!1),c.pageNumber=1,c.posts=t.data})},P=function(){return o.getPosts(20,1,["art"],!0).then(function(t){c.artworks=t.data,angular.forEach(c.artworks,function(t){t.content=e.trustAsHtml(t.content),t.active=!1})})},y=function(){return o.getPosts(20,1,["gallery"],!1).then(function(t){A(t.data,!0),c.galleries=t.data})},b=function(t,e){var a=["banner"];return o.getBanners(c.postsPerPage,a).then(function(a){var n=[];t?(c.banners=[],angular.forEach(a.data,function(e){angular.forEach(e.terms.category,function(a){angular.forEach(t,function(t){a.name.toLowerCase()===t.toLowerCase()&&(n=n.concat(e))})})})):n=n.concat(a.data),e?(c.banners=[],angular.forEach(n,function(t){angular.forEach(t.terms.post_tag,function(e){"featured"===e.name.toLowerCase()&&(c.banners=c.banners.concat(t))})})):c.banners=c.banners.concat(n)})},A=function(t,e){var a=[];angular.forEach(t,function(t,n){t.urlName=encodeURI(t.slug).replace(/%20/g,"-"),angular.forEach(t.terms.category,function(o){"banner"===o.name.toLowerCase()&&(a.push(n),e&&(c.banners=[],c.banners.push(t)))}),angular.forEach(t.terms.post_tag,function(e){"featured"===e.name.toLowerCase()&&(t.featured=!0)})});for(var n=a.length-1;n>-1;n--){var o=a[n];t.splice(o,1)}},H=function(t,e,n){c.deactivateMore=!1,c.categories=[],t&&("What change moment are you going through?"===t.name||"All Change Moments"===t.name?(i[0].active=!0,u=i[0],c.categories=c.categories.concat(g)):(n?(i[0].active=!0,u=i[0],u.name="What change moment are you going through?"):u.name=t.name,c.categories.push(t.name))),angular.forEach(i,function(e){e.name===t.name?e.active=!0:e.active=!1}),n&&(u=i[0]),c.pageNumber=0;var o=c.postsPerPage*c.pageNumber;return c.posts=c.posts.splice(0,o),e&&(b(c.categories),c.bannerIndex=0),"/home"===a.path()?f():void a.path("/home")};return{data:c,standardPostCategories:g,chosenMoment:u,changeMoments:i,selectedMoment:H,getPage:m,getPost:p,getPostByTitle:l,getPostByName:h,getPosts:f,getPostsByAuthor:d,getPostsByTags:v,getArtworks:P,getGalleries:y,getBanners:b}},e=angular.module("cxcApp");e.factory("contentState",["$timeout","$sce","$location","pageService","postService","socialState","errorState",t])}();
!function(){"use strict";var e=function(e,r){var c="https://services.brightrock.co.za/changeexchange/wp-json/",a="https://www.changeexchange.co.za/",t=function(){var a=e.defer();if(c)a.resolve(c);else{var t="Service Base is undefined.";a.reject(t);var n={message:t};r(n)}return a.promise};return{serviceBase:c,getServiceUrl:t,applicationBase:a}},r=angular.module("cxcApp");r.factory("cxcService",["$q","errorState",e])}();
!function(){var e=function(){var e={firstMessage:"There seems to have been one or more errors:",ajaxErrors:[],secondMessage:"Please refresh the browser window or come back again in a little while..."},r=function(e){console.log(e)};return{data:e,catchError:r}},r=angular.module("cxcApp");r.factory("errorState",[e])}();
!function(){"use strict";var t=function(t,e,r){var c=e.serviceBase,n=function(e){return t.get(c+"pages/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(){return t.get(c+"pages/").then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPage:n,getPages:a}},e=angular.module("cxcApp");e.factory("pageService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,r){var n=e.serviceBase,c=function(e,c){return c?t.get(n+"posts?filter[name]="+c).then(function(t){return t})["catch"](function(t){r.catchError(t)}):t.get(n+"posts/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},o=function(e){return e=e.replace("Ã©","e"),t.get(n+"posts?filter[name]="+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},s=function(e,c,o,s){var i=n+"posts?filter[post_status]=publish&filter[posts_per_page]="+e+"&page="+c+"&fields=ID,title,excerpt,slug,category";if(s&&(i+=",content"),o&&o.length>0){i+="&filter[category_name]=";for(var u=0;u<o.length;u++)i=i+","+o[u]}return i=i.replace("'",""),t.get(i).then(function(t){return t})["catch"](function(t){r.catchError(t)})},i=function(e){var r=n+"posts?filter[post_status]=publish&filter[posts_per_page]=3&filter[author]="+e+"&fields=ID,title,excerpt,slug";return t.get(r).then(function(t){return t})},u=function(e){var c=n+"posts?filter[post_status]=publish&fields=ID,title,excerpt,slug";if(e&&e.length>0){c+="&filter[tag]=";for(var o=0;o<e.length;o++)c=c+","+e[o]}return c=c.replace("'",""),t.get(c).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(e,c){var o=n+"posts?filter[post_status]=publish&filter[posts_per_page]="+e+"&fields=ID,title,excerpt,slug,content";if(c&&c.length>0){o+="&filter[category_name]=";for(var s=0;s<c.length;s++)o=o+","+c[s]}return o=o.replace("'",""),t.get(o).then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPost:c,getPostByName:o,getPosts:s,getPostsByTags:u,getPostsByAuthor:i,getBanners:a}},e=angular.module("cxcApp");e.factory("postService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var e=function(e){var a={currentSm:"fb",fbevents:!1,socialNetworks:[{id:1,abbrev:"fb",url:"https://www.facebook.com/brightrock","class":"fa fa-facebook-square",active:!1},{id:2,abbrev:"tw",url:"https://www.twitter.com/","class":"fa fa-twitter-square",active:!1},{id:4,abbrev:"gg",url:"https://www.google.com/","class":"fa fa-google-plus-square",active:!1},{id:5,abbrev:"yt",url:"https://www.youtube.com/","class":"fa fa-youtube-square",active:!1}],videoPlayer:!1,firstheader:!1,secondheader:!1,thirdheader:!1},t=function(t,r){angular.forEach(a.socialNetworks,function(a){a.id===t?e.innerWidth<1224?e.open(a.url):a.active=!0:a.active=!1}),"fe"===r?(a.currentSm="fb",a.fbevents=!0):(a.fbevents=!1,a.currentSm=r),"yt"===r?a.videoPlayer=!a.videoPlayer:a.videoPlayer=!1};return{data:a,changeSm:t}},a=angular.module("cxcApp");a.factory("socialState",["$window",e])}();