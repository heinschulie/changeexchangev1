"use strict";var app=angular.module("cxcApp",["ngRoute","ngSanitize","angular-carousel"]);app.config(["$routeProvider","$locationProvider",function(e,l){e.when("/exchange/:pagename",{controller:"pageController",templateUrl:"/app/views/page.html"}),e.when("/galleries",{controller:"galleriesController",templateUrl:"/app/views/galleries.html"}),e.when("/gallery/:galleryName",{controller:"galleryController",templateUrl:"/app/views/gallery.html"}),e.when("/home",{controller:"homeController",templateUrl:"/app/views/home.html"}),e.when("/:postId",{controller:"postController",templateUrl:"/app/views/post.html"}),e.otherwise({redirectTo:"/home"})}]),app.config(["$httpProvider",function(e){e.interceptors.push("ajaxInterceptorService"),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]);
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n){t.contentState=e,t.socialState=n;var o=function(){return e.getGalleries()};o()};t.controller("galleriesController",["$scope","contentState","socialState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),n=function(t,n){t.contentState=n;var a=function(){return n.getArtworks()};t.expand=function(n){angular.forEach(t.contentState.data.artworks,function(t){t!=n&&(t.active=!1)}),n.active=!n.active},a()};t.controller("galleryController",["$scope","contentState",n])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,o,a,n){t.contentState=a,t.socialState=n,t.errorState=o,t.callForPosts=function(){return a.getPosts()},a.data.categories.length<1&&(t.contentState.data.categories=t.contentState.standardPostCategories),a.data.posts.length<1&&t.callForPosts()};t.controller("homeController",["$scope","$timeout","errorState","contentState","socialState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n,a,o,r){t.contentState=a,t.socialState=o,t.errorState=n,t.active=!1,t.toggleMenu=function(){t.active?t.active=!1:t.active=!0},t.callForPosts=function(){return"/home"===e.path()?a.getPosts():void e.path("/home")};var c=function(e){return r.getCategories(e).then(function(e){t.exchangeCategories=e.data})};c("Exchange"),a.data.banners&&a.data.banners.length||a.getBanners(null,!0)};t.controller("indexController",["$scope","$location","errorState","contentState","socialState","categoryService",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n){t.contentState=n;var a=function(){return n.getPage(e.pagename)};a()};t.controller("pageController",["$scope","$routeParams","contentState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,o){t.sameAuthorPosts=[],t.sameCategoryPosts=[],t.recommendedMessageCat="",t.recommendedMessageAuthor="",t.contentState=o;var a=e.postId;t.callForPost=function(){return o.getPost(a).then(function(e){t.recommendedMessageCat="Enjoyed that article? Then we suggest you try one of these below...",t.recommendedMessageAuthor="More articles from "+o.data.post.author.name})};var r=function(){},n=function(){o.data.posts.length||r(),t.sameAuthorPosts=o.data.posts.filter(function(t){return t.author.username===o.data.post.author.username&&t.ID!==o.data.post.ID}),t.sameCategoryPosts=o.data.posts.filter(function(t){if(t.ID===o.data.post.ID)return!1;for(var e=t.terms.category.map(function(t){return t.name}),a=0;a<e.length;a++)for(var r=0;r<o.data.categories.length;r++)if(e[a]===o.data.categories[r]&&"Change Moments"!==e[a]&&"Exchange"!==e[a])return!0})};t.callForPost().then(function(t){return o.data.posts.length<1?o.getPosts():void 0}).then(n)};t.controller("postController",["$scope","$routeParams","contentState",e])}();
!function(){var e=angular.module("cxcApp");e.directive("cxcBanner",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-banner.html",scope:{cxcbannercontent:"="},replace:!0,link:function(e){},controller:["$scope","$sce",function(e,c){("string"==typeof e.cxcbannercontent.excerpt||e.cxcbannercontent.excerpt instanceof String)&&(e.videoExists=!0,e.cxcbannercontent.excerpt=e.cxcbannercontent.excerpt.replace("<p>","").replace("</p>",""),e.cxcbannercontent.excerpt=c.trustAsResourceUrl(e.cxcbannercontent.excerpt))}]}}])}();
!function(){var t=angular.module("cxcApp");t.directive("cxcCard",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-card.html",scope:{cxccontent:"="},replace:!0,link:function(t){},controller:["$scope","$sce",function(t,c){("string"==typeof t.cxccontent.title||t.cxccontent.title instanceof String)&&(t.cxccontent.title=c.trustAsHtml(t.cxccontent.title)),("string"==typeof t.cxccontent.excerpt||t.cxccontent.excerpt instanceof String)&&(t.cxccontent.excerpt=c.trustAsHtml(t.cxccontent.excerpt))}]}}])}();
!function(){var t=angular.module("cxcApp");t.directive("twitterStream",[function(){return{restrict:"E",templateUrl:"app/directives/templates/twitter-stream.html",replace:!0,link:function(t,e){function r(){!function(t,e,r){var n,i=t.getElementsByTagName(e)[0],c=/^http:/.test(t.location)?"http":"https";t.getElementById(r)||(n=t.createElement(e),n.id=r,n.src=c+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(n,i))}(document,"script","twitter-wjs"),console.log("run twitter script")}r()},controller:["$scope","$timeout",function(t,e){}]}}])}();
"use strict";app.factory("ajaxInterceptorService",["$q","$location","errorState","cxcService",function(r,e,t,s){var a=(s.serviceBase,{}),o=function(r){return r.headers=r.headers||{},console.log("A request just left our shores"),r},u=function(e){return(401===e.status||500===e.status)&&(console.log("There was a "+e.status+" error"),alert("There was a "+e.status+" error"),t.data.ajaxErrors.push(e)),r.reject(e)};return a.request=o,a.responseError=u,a}]);
!function(){"use strict";var t=function(t,r,e){var n=r.serviceBase,a=function(r){return t.get(n+"posts/types/posts/taxonomies/category/terms").then(function(t){if(r){var e=t.data.filter(function(t){return t.parent?t.parent.name===r:void 0});t.data=e}return t})["catch"](function(t){e.catchError(t)})};return{getCategories:a}},r=angular.module("cxcApp");r.factory("categoryService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,a,n,o,r,s){var c={categories:[],pageNumber:0,postsPerPage:18,post:{},posts:[],banners:[],galleries:[],artworks:[]},g=["Landing that Job","Making a Home","Starting a Family","Tying the Knot","Ruda talks change","The Dan Nicoll Show","VeranderDinge"],i={name:"What change moment are you going through?",active:!0},u=[{name:"What change moment are you going through?",active:!1},{name:"Landing that Job",active:!1},{name:"Making a Home",active:!1},{name:"Starting a Family",active:!1},{name:"Tying the Knot",active:!1}],m=function(t){return n.getPage(t).then(function(t){c.page=t.data,c.page.content=e.trustAsHtml(c.page.content)})},h=function(t){return o.getPost(t).then(function(t){c.categories=t.data.terms.category.map(function(t){return t.name}),c.post=t.data,c.post.title=e.trustAsHtml(c.post.title),c.post.excerpt=e.trustAsHtml(c.post.excerpt),c.post.content=e.trustAsHtml(c.post.content)})},f=function(){return c.pageNumber=c.pageNumber+1,c.categories.length&&angular.forEach(c.categories,function(t){"events"===t.toLowerCase()&&r.changeSm("fe")}),o.getPosts(c.postsPerPage,c.pageNumber,c.categories,!1).then(function(t){b(t.data,!1),1===c.pageNumber?c.posts=t.data:c.posts=c.posts.concat(t.data)})},p=function(){return o.getPosts(20,1,["art"],!0).then(function(t){c.artworks=t.data,angular.forEach(c.artworks,function(t){t.content=e.trustAsHtml(t.content),t.active=!1})})},l=function(){return o.getPosts(20,1,["gallery"],!1).then(function(t){b(t.data,!0),c.galleries=t.data})},d=function(t,e){var a=["banner"];return o.getBanners(c.postsPerPage,a).then(function(a){var n=[];t?(c.banners=[],angular.forEach(a.data,function(e){angular.forEach(e.terms.category,function(a){angular.forEach(t,function(t){a.name.toLowerCase()===t.toLowerCase()&&(n=n.concat(e))})})})):n=n.concat(a.data),e?(c.banners=[],angular.forEach(n,function(t){angular.forEach(t.terms.post_tag,function(e){"featured"===e.name.toLowerCase()&&(c.banners=c.banners.concat(t))})})):c.banners=c.banners.concat(n)})},b=function(t,e){var a=[];angular.forEach(t,function(t,n){angular.forEach(t.terms.category,function(o){"banner"===o.name.toLowerCase()&&(a.push(n),e&&(c.banners=[],c.banners.push(t)))}),angular.forEach(t.terms.post_tag,function(e){"featured"===e.name.toLowerCase()&&(t.featured=!0)})}),angular.forEach(a,function(e){t.splice(e,1)})},v=function(t,e){c.categories=[],t&&("What change moment are you going through?"===t.name?(u[0].active=!0,i=u[0],c.categories=c.categories.concat(g)):(i.name=t.name,c.categories.push(t.name))),angular.forEach(u,function(t){t.name===i.name?t.active=!0:t.active=!1}),c.pageNumber=0;var n=c.postsPerPage*c.pageNumber;return c.posts=c.posts.splice(0,n),"/home"===a.path()?f():(a.path("/home"),void(e&&d(c.categories)))};return{data:c,standardPostCategories:g,chosenMoment:i,changeMoments:u,selectedMoment:v,getPage:m,getPost:h,getPosts:f,getArtworks:p,getGalleries:l,getBanners:d}},e=angular.module("cxcApp");e.factory("contentState",["$timeout","$sce","$location","pageService","postService","socialState","errorState",t])}();
!function(){"use strict";var e=function(e,r){var c="http://changeexchangev1.azurewebsites.net/",a="https://services.brightrock.co.za/changeexchange/wp-json/",t=function(){var c=e.defer();if(a)c.resolve(a);else{var t="Service Base is undefined.";c.reject(t);var n={message:t};r(n)}return c.promise};return{serviceBase:a,getServiceUrl:t,applicationBase:c}},r=angular.module("cxcApp");r.factory("cxcService",["$q","errorState",e])}();
!function(){var r=function(){var r={ajaxErrors:[]},a=function(r){console.log(r)};return{data:r,catchError:a}},a=angular.module("cxcApp");a.factory("errorState",[r])}();
!function(){"use strict";var t=function(t,e,r){var c=e.serviceBase,n=function(e){return t.get(c+"pages/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(){return t.get(c+"pages/").then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPage:n,getPages:a}},e=angular.module("cxcApp");e.factory("pageService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,r){var n=e.serviceBase,c=function(e){return t.get(n+"posts/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},o=function(e,c,o,a){var i=n+"posts?filter[posts_per_page]="+e+"&page="+c+"&fields=ID,title,excerpt";if(a&&(i+=",content"),o&&o.length>0){i+="&filter[category_name]=";for(var f=0;f<o.length;f++)i=i+","+o[f]}return i=i.replace("'",""),t.get(i).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(e,c){var o=n+"posts?filter[posts_per_page]="+e+"&fields=ID,title,excerpt";if(c&&c.length>0){o+="&filter[category_name]=";for(var a=0;a<c.length;a++)o=o+","+c[a]}return o=o.replace("'",""),t.get(o).then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPost:c,getPosts:o,getBanners:a}},e=angular.module("cxcApp");e.factory("postService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(){var t={currentSm:"fb"},c=function(c){t.currentSm=c};return{data:t,changeSm:c}},c=angular.module("cxcApp");c.factory("socialState",[t])}();