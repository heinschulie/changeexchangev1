"use strict";var app=angular.module("cxcApp",["ngRoute","ngSanitize","angular-carousel"]);app.config(["$routeProvider",function(e){e.when("/exchange/:pagename",{controller:"pageController",templateUrl:"/app/views/page.html"}),e.when("/galleries",{controller:"galleriesController",templateUrl:"/app/views/galleries.html"}),e.when("/gallery/:galleryName",{controller:"galleryController",templateUrl:"/app/views/gallery.html"}),e.when("/home",{controller:"homeController",templateUrl:"/app/views/home.html"}),e.when("/events",{templateUrl:"/app/views/events.html"}),e.when("/:postId",{controller:"postController",templateUrl:"/app/views/post.html"}),e.when("/oops/whathappened",{templateUrl:"/app/views/oops.html"}),e.otherwise({redirectTo:"/home"})}]),app.config(["$httpProvider",function(e){e.interceptors.push("ajaxInterceptorService"),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]);
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e){t.contentState=e;var n=function(){return e.getGalleries()};n()};t.controller("galleriesController",["$scope","contentState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),n=function(t,n){t.contentState=n;var a=function(){return n.getArtworks()};t.expand=function(n){angular.forEach(t.contentState.data.artworks,function(t){t!=n&&(t.active=!1)}),n.active=!n.active},a()};t.controller("galleryController",["$scope","contentState",n])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n){t.contentState=n,t.errorState=e,t.callForPosts=function(){return n.getPosts()},t.currentSm="fb",t.changeSm=function(e){t.currentSm=e},n.data.categories.length<1&&(t.contentState.data.categories=t.contentState.standardPostCategories),n.data.posts.length<1&&t.callForPosts(),n.data.banners&&n.data.banners.length||n.getBanners(null,!0)};t.controller("homeController",["$scope","errorState","contentState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,o,n,a){t.contentState=n,t.errorState=o,t.active=!1,t.toggleMenu=function(){t.active?t.active=!1:t.active=!0},t.callForPosts=function(){return"/home"===e.path()?n.getPosts():void e.path("/home")};var c=function(e){return a.getCategories(e).then(function(e){t.exchangeCategories=e.data})};c("Exchange")};t.controller("indexController",["$scope","$location","errorState","contentState","categoryService",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),e=function(t,e,n){t.contentState=n;var a=function(){return n.getPage(e.pagename)};a()};t.controller("pageController",["$scope","$routeParams","contentState",e])}();
!function(){"use strict";var t=angular.module("cxcApp"),o=function(t,o,a){t.sameAuthorPosts=[],t.sameCategoryPosts=[],t.contentState=a;var e=o.postId;t.callForPost=function(){return a.getPost(e)};var n=function(){},r=function(){a.data.posts.length||n(),t.sameAuthorPosts=a.data.posts.filter(function(t){return t.author.username===a.data.post.author.username}),t.sameCategoryPosts=a.data.posts.filter(function(t){if(t.ID===a.data.post.ID)return!1;for(var o=t.terms.category.map(function(t){return t.name}),e=0;e<o.length;e++)for(var n=0;n<a.data.categories.length;n++)if(o[e]===a.data.categories[n]&&"Change Moments"!==o[e]&&"Exchange"!==o[e])return!0})};t.callForPost().then(function(t){return a.data.posts.length<1?a.getPosts():void 0}).then(r)};t.controller("postController",["$scope","$routeParams","contentState",o])}();
!function(){var e=angular.module("cxcApp");e.directive("cxcBanner",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-banner.html",scope:{cxcbannercontent:"="},replace:!0,link:function(e){},controller:["$scope","$sce",function(e,c){e.cxcbannercontent.excerpt=e.cxcbannercontent.excerpt.replace("<p>","").replace("</p>",""),e.cxcbannercontent.excerpt=c.trustAsResourceUrl(e.cxcbannercontent.excerpt)}]}}])}();
!function(){var c=angular.module("cxcApp");c.directive("cxcCard",[function(){return{restrict:"E",templateUrl:"app/directives/templates/cxc-card.html",scope:{cxccontent:"="},replace:!0,link:function(c){},controller:["$scope",function(c){c.testClick=function(){alert(c.cxccontent.title)}}]}}])}();
"use strict";app.factory("ajaxInterceptorService",["$q","$location","errorState","cxcService",function(r,e,t,s){var o=(s.serviceBase,{}),a=function(r){return r.headers=r.headers||{},console.log("A request just left our shores"),r},c=function(e){return(401===e.status||500===e.status)&&(console.log("There was a "+e.status+" error"),t.data.ajaxErrors.push(e)),r.reject(e)};return o.request=a,o.responseError=c,o}]);
!function(){"use strict";var t=function(t,r,e){var n=r.serviceBase,a=function(r){return t.get(n+"posts/types/posts/taxonomies/category/terms").then(function(t){if(r){var e=t.data.filter(function(t){return t.parent?t.parent.name===r:void 0});t.data=e}return t})["catch"](function(t){e.catchError(t)})};return{getCategories:a}},r=angular.module("cxcApp");r.factory("categoryService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,a,e,n,o,r){var c={categories:[],pageNumber:0,postsPerPage:12,post:{},posts:[],banners:[],galleries:[],artworks:[]},s=["Landing that Job","Making a Home","Starting a Family","Tying the Knot","Ruda talks change","The Dan Nicoll Show","VeranderDinge"],g={name:"What change moment are you going through?",active:!0},u=[{name:"What change moment are you going through?",active:!1},{name:"Landing that Job",active:!1},{name:"Making a Home",active:!1},{name:"Starting a Family",active:!1},{name:"Tying the Knot",active:!1}],i=function(t){return n.getPage(t).then(function(t){c.page=t.data,c.page.content=a.trustAsHtml(c.page.content)})},m=function(t){return o.getPost(t).then(function(t){c.categories=t.data.terms.category.map(function(t){return t.name}),c.post=t.data,c.post.content=a.trustAsHtml(c.post.content)})},h=function(){return c.pageNumber=c.pageNumber+1,o.getPosts(c.postsPerPage,c.pageNumber,c.categories,!1).then(function(t){d(t.data,!1),1===c.pageNumber?c.posts=t.data:c.posts=c.posts.concat(t.data)})},f=function(){return o.getPosts(20,1,["art"],!0).then(function(t){c.artworks=t.data,angular.forEach(c.artworks,function(t){t.content=a.trustAsHtml(t.content),t.active=!1})})},p=function(){return o.getPosts(20,1,["gallery"],!1).then(function(t){d(t.data,!0),c.galleries=t.data})},l=function(t,a){var e=["banner"];return o.getBanners(c.postsPerPage,e).then(function(e){var n=[];t?(c.banners=[],angular.forEach(e.data,function(a){angular.forEach(a.terms.category,function(e){angular.forEach(t,function(t){e.name.toLowerCase()===t.toLowerCase()&&(n=n.concat(a))})})})):n=n.concat(e.data),a?(c.banners=[],angular.forEach(n,function(t){angular.forEach(t.terms.post_tag,function(a){"featured"===a.name.toLowerCase()&&(c.banners=c.banners.concat(t))})})):c.banners=c.banners.concat(n)})},d=function(t,a){var e=[];angular.forEach(t,function(t,n){angular.forEach(t.terms.category,function(o){"Banner"===o.name&&(e.push(n),a&&(c.banners=[],c.banners.push(t)))}),angular.forEach(t.terms.post_tag,function(a){"featured"===a.name.toLowerCase()&&(t.featured=!0)})}),angular.forEach(e,function(a){t.splice(a,1)})},b=function(t,a){c.categories=[],t&&("What change moment are you going through?"===t.name?(u[0].active=!0,g=u[0],c.categories=c.categories.concat(s)):(g.name=t.name,c.categories.push(t.name))),angular.forEach(u,function(t){t.name===g.name?t.active=!0:t.active=!1}),c.pageNumber=0;var n=c.postsPerPage*c.pageNumber;return c.posts=c.posts.splice(0,n),"/home"===e.path()?h():(e.path("/home"),void(a&&l(c.categories)))};return{data:c,standardPostCategories:s,chosenMoment:g,changeMoments:u,selectedMoment:b,getPage:i,getPost:m,getPosts:h,getArtworks:f,getGalleries:p,getBanners:l}},a=angular.module("cxcApp");a.factory("contentState",["$timeout","$sce","$location","pageService","postService","errorState",t])}();
!function(){"use strict";var e=function(e,r){var t="http://localhost/ohsoserious/wp-json/",s="http://localhost:16327/",a=function(){var s=e.defer();if(t)s.resolve(t);else{var a="Service Base is undefined.";s.reject(a);var c={message:a};r(c)}return s.promise};return{serviceBase:t,getServiceUrl:a,applicationBase:s}},r=angular.module("cxcApp");r.factory("cxcService",["$q","errorState",e])}();
!function(){var r=function(){var r={ajaxErrors:[]},a=function(r){console.log(r)};return{data:r,catchError:a}},a=angular.module("cxcApp");a.factory("errorState",[r])}();
!function(){"use strict";var t=function(t,e,r){var c=e.serviceBase,n=function(e){return t.get(c+"pages/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(){return t.get(c+"pages/").then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPage:n,getPages:a}},e=angular.module("cxcApp");e.factory("pageService",["$http","cxcService","errorState",t])}();
!function(){"use strict";var t=function(t,e,r){var n=e.serviceBase,c=function(e){return t.get(n+"posts/"+e).then(function(t){return t})["catch"](function(t){r.catchError(t)})},o=function(e,c,o,a){var i=n+"posts?filter[posts_per_page]="+e+"&page="+c+"&fields=ID,title,excerpt";if(a&&(i+=",content"),o&&o.length>0){i+="&filter[category_name]=";for(var f=0;f<o.length;f++)i=i+","+o[f]}return i=i.replace("'",""),t.get(i).then(function(t){return t})["catch"](function(t){r.catchError(t)})},a=function(e,c){var o=n+"posts?filter[posts_per_page]="+e+"&fields=ID,title,excerpt";if(c&&c.length>0){o+="&filter[category_name]=";for(var a=0;a<c.length;a++)o=o+","+c[a]}return o=o.replace("'",""),t.get(o).then(function(t){return t})["catch"](function(t){r.catchError(t)})};return{getPost:c,getPosts:o,getBanners:a}},e=angular.module("cxcApp");e.factory("postService",["$http","cxcService","errorState",t])}();